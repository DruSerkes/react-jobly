(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{195:function(e,t,a){e.exports=a(352)},200:function(e,t,a){},222:function(e,t){},224:function(e,t){},238:function(e,t){},240:function(e,t){},268:function(e,t){},270:function(e,t){},271:function(e,t){},277:function(e,t){},279:function(e,t){},297:function(e,t){},300:function(e,t){},316:function(e,t){},319:function(e,t){},336:function(e,t,a){},337:function(e,t,a){},342:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(187),s=a.n(c),l=(a(200),a(1)),u=a.n(l),o=a(5),i=a(14),m=a(15),p=a(8),b=a(53),f=a(54),v=a(188),h=a(189),E=a(190),d=a.n(E),g=a(218),j=function(){function e(){Object(v.a)(this,e)}return Object(h.a)(e,null,[{key:"request",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n,r,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:"get",a._token=localStorage.getItem("jobly-token")||null,console.debug("API Call:",t,a,n),e.prev=4,e.next=7,d()(Object(f.a)({method:n,url:"http://localhost:3001/".concat(t)},"get"===n?"params":"data",a));case 7:return e.abrupt("return",e.sent.data);case 10:throw e.prev=10,e.t0=e.catch(4),console.error("API Error:",e.t0.response),r=e.t0.response.data.message,Array.isArray(r)?r:[r];case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompany",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request("companies/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.company);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllCompanies",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:null,e.prev=1,!t){e.next=9;break}return e.next=5,this.request("companies",t);case 5:return a=e.sent,e.abrupt("return",a.companies);case 9:return e.next=11,this.request("companies");case 11:return n=e.sent,e.abrupt("return",n.companies);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAllJobs",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,a,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:null,e.prev=1,!t){e.next=9;break}return e.next=5,this.request("jobs",t);case 5:return a=e.sent,e.abrupt("return",a.jobs);case 9:return e.next=11,this.request("jobs");case 11:return n=e.sent,e.abrupt("return",n.jobs);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request("login",t,"post");case 3:return a=e.sent,e.abrupt("return",a.token);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request("users",t,"post");case 3:return a=e.sent,e.abrupt("return",a.token);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=g.decode(t),e.next=4,this.request("users/".concat(a.username));case 4:return n=e.sent,e.abrupt("return",n.user);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.username,delete t.username,e.next=5,this.request("users/".concat(a),t,"patch");case 5:return n=e.sent,e.abrupt("return",n.user);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"apply",value:function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.username,e.next=4,this.request("jobs/".concat(t.id,"/apply"),t,"post");case 4:return r=e.sent,e.next=7,this.request("users/".concat(n));case 7:return c=e.sent,e.abrupt("return",[r.message,c.user]);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),y=(a(336),r.a.createContext()),x=function(e){var t=e.job,a=Object(n.useContext)(y),c=a.currentUser,s=a.setCurrentUser,l=function(){var e=Object(o.a)(u.a.mark((function e(){var a,n,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.apply(t,c);case 3:a=e.sent,n=Object(i.a)(a,2),r=n[0],l=n[1],"applied"===r&&s(l),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return c.jobs.forEach((function(e){e.id===t.id&&(t.applied=!0)})),r.a.createElement("div",{className:"JobCard"},r.a.createElement("div",{className:"JobCard-Info"},r.a.createElement("h3",null,t.title),r.a.createElement("ul",null,r.a.createElement("li",null,"Salary: ",t.salary),r.a.createElement("li",null,"Equity: ",t.equity))),t.applied?r.a.createElement("button",{className:"JobCard-Apply disabled",onClick:function(){return null}},"Applied"):r.a.createElement("button",{className:"JobCard-Apply",onClick:l},"Apply"))},w=(a(337),function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(p.h)().handle;return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCompany(s);case 2:t=e.sent,c(Object(b.a)({},t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),a?r.a.createElement("div",{className:"Company"},r.a.createElement("h3",null,a.name),r.a.createElement("p",null,a.description),r.a.createElement("ul",null,a.jobs.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(x,{job:e}))})))):r.a.createElement("h2",null,"Loading company data")}),O=a(67),k=(a(342),function(e){var t=e.company;return r.a.createElement("div",{className:"CompanyCard"},r.a.createElement("h3",null,r.a.createElement("span",null,t.name),r.a.createElement("img",{src:t.logo_url,alt:t.name})),r.a.createElement("p",null,t.description))}),S=a(18),N=a(194),C=function(e){var t=e.label,a=Object(N.a)(e,["label"]),n=Object(S.c)(a),c=Object(i.a)(n,2),s=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:a.id||a.name},t),r.a.createElement("input",Object.assign({className:"text-input"},s,a)),l.touched&&l.error?r.a.createElement("div",{className:"error"},l.error):null)},L=(a(344),function(e){var t=e.handleSearch;return r.a.createElement("div",{className:"Search"},r.a.createElement(S.b,{initialValues:{search:""},onSubmit:t},r.a.createElement(S.a,null,r.a.createElement(C,{placeholder:"Enter search term...",name:"search"}),r.a.createElement("button",null,"Submit"))))}),q=(a(345),function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getAllCompanies();case 2:t=e.sent,c(Object(O.a)(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,e.next=3,j.getAllCompanies(t);case 3:r=e.sent,c(Object(O.a)(r)),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return a?r.a.createElement("div",{className:"Companies"},r.a.createElement(L,{handleSearch:s}),a.length?r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",{key:e.handle},r.a.createElement(m.b,{to:"/companies/".concat(e.handle)},r.a.createElement(k,{company:e})," "))}))):r.a.createElement("p",{className:"Companies-Sorry"},"Sorry! No companies match your search")):r.a.createElement("h2",null,"Loading Companies \u2026")}),U=(a(346),function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getAllJobs();case 2:t=e.sent,c(Object(O.a)(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,e.next=3,j.getAllJobs(t);case 3:r=e.sent,c(Object(O.a)(r)),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return a?r.a.createElement("div",{className:"Jobs"},r.a.createElement(L,{handleSearch:s}),a.length?r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(x,{job:e}))}))):r.a.createElement("p",{className:"Jobs-Sorry"},"Sorry! No jobs match your search")):r.a.createElement("h2",null,"Loading jobs \u2026")}),_=a(13),A=_.a({username:_.b().required("Required"),password:_.b().required("Required")}),J=function(e){var t=e.doLogin,a=function(){var e=Object(o.a)(u.a.mark((function e(a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,e.next=3,j.login(a);case 3:c=e.sent,localStorage.setItem("jobly-token",c),r(!1),t(a);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"LoginForm"},r.a.createElement(S.b,{initialValues:{username:"",password:""},validationSchema:A,onSubmit:a},r.a.createElement(S.a,null,r.a.createElement(C,{label:"Username",name:"username",type:"text"}),r.a.createElement(C,{label:"Password",name:"password",type:"password"}),r.a.createElement("button",null,"Submit"))))},I=_.a({username:_.b().min(5,"Must be at least 5 characters").required("Required"),password:_.b().min(5,"Must be at least 5 characters").required("Required"),firstName:_.b().min(1,"Must be at least 1 character"),lastName:_.b().min(1,"Must be at least 1 character"),email:_.b()}),M=function(e){var t=e.doLogin,a=function(){var e=Object(o.a)(u.a.mark((function e(a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,e.next=3,j.register(a);case 3:c=e.sent,localStorage.setItem("jobly-token",c),r(!1),t(a);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"RegistrationForm"},r.a.createElement(S.b,{initialValues:{username:"",password:"",first_name:"",last_name:"",email:""},validationSchema:I,onSubmit:a},r.a.createElement(S.a,null,r.a.createElement(C,{label:"Username",name:"username",type:"text"}),r.a.createElement(C,{label:"Password",name:"password",type:"password"}),r.a.createElement(C,{label:"First name",name:"first_name",type:"text"}),r.a.createElement(C,{label:"Last name",name:"last_name",type:"text"}),r.a.createElement(C,{label:"Email",name:"email",type:"email"}),r.a.createElement("button",null,"Submit"))))},P=(a(347),function(){var e=Object(n.useState)("login"),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useContext)(y).setCurrentUser,l=Object(p.g)(),u=function(e){s(Object(b.a)({},e)),l.push("/")},o=function(e){if("login"===a){if(e.target.classList.contains("active"))return;e.target.classList.toggle("active"),e.target.previousElementSibling.classList.toggle("active"),c("register")}else{if(e.target.classList.contains("active"))return;e.target.classList.toggle("active"),e.target.nextElementSibling.classList.toggle("active"),c("login")}};return r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"Login-Container"},r.a.createElement("div",{className:"Login-Buttons"},r.a.createElement("button",{className:"login active",onClick:o},"Login"),r.a.createElement("button",{className:"register",onClick:o},"Register")),"login"===a?r.a.createElement(J,{doLogin:u}):r.a.createElement(M,{doLogin:u})))}),R=(a(348),function(){var e=Object(n.useContext)(y).currentUser;return r.a.createElement("div",{className:"Home"},r.a.createElement("h1",null,"Jobly"),r.a.createElement("p",null,"All the jobs in one, convenient place."),e?r.a.createElement("h2",null,"Welcome Back!"):r.a.createElement(m.b,{to:"/login"},r.a.createElement("button",null,"Log in")))}),F=_.a({first_name:_.b().min(1,"Must be at least 1 characters"),last_name:_.b().min(1,"Must be at least 1 character"),email:_.b().email("Must be an email"),photo_url:_.b().url("Must be a URL"),password:_.b().min(5,"Must be at least 5 characters").required("Required")}),B=(a(349),function(){var e=Object(n.useContext)(y),t=e.currentUser,a=e.setCurrentUser,c={first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",photo_url:t.photo_url||"",password:""},s=function(){var e=Object(o.a)(u.a.mark((function e(n,r){var c,s,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in c=r.setSubmitting,s=r.resetForm,n)n[l]||delete n[l];return n.username=t.username,c(!1),e.next=6,j.updateUser(n);case 6:o=e.sent,s(),a(Object(b.a)({},o));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Profile"},r.a.createElement("h2",null,"Profile"),r.a.createElement(S.b,{initialValues:c,validationSchema:F,onSubmit:s},r.a.createElement(S.a,null,r.a.createElement("h4",null,"Username"),r.a.createElement("p",null,t.username),r.a.createElement(C,{label:"First name",name:"first_name",type:"text"}),r.a.createElement(C,{label:"Last name",name:"last_name",type:"text"}),r.a.createElement(C,{label:"Email",name:"email",type:"email"}),r.a.createElement(C,{label:"Photo URL",name:"photo_url",type:"url"}),r.a.createElement(C,{label:"Re-enter Password",name:"password",type:"password"}),r.a.createElement("button",{type:"submit"},"Save Changes"))))}),V=function(e){var t=e.currentUser;return r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/jobs"},t?r.a.createElement(U,null):r.a.createElement(p.a,{to:"/"})),r.a.createElement(p.b,{exact:!0,path:"/companies/:handle"},t?r.a.createElement(w,null):r.a.createElement(p.a,{to:"/"})),r.a.createElement(p.b,{exact:!0,path:"/companies"},t?r.a.createElement(q,null):r.a.createElement(p.a,{to:"/"})),r.a.createElement(p.b,{exact:!0,path:"/login"},r.a.createElement(P,null)),r.a.createElement(p.b,{exact:!0,path:"/profile"},t?r.a.createElement(B,null):r.a.createElement(p.a,{to:"/"})),r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(R,null)),r.a.createElement(p.a,{path:"/",to:"/"}))},W=(a(350),function(e){var t=e.currentUser,a=e.setCurrentUser,c=Object(n.useState)(!1),s=Object(i.a)(c,2),l=s[0],u=s[1],o=Object(p.g)();return Object(n.useEffect)((function(){localStorage.getItem("jobly-token")?u((function(){return!0})):u(!1)}),[t]),r.a.createElement("div",{className:"Navbar"},r.a.createElement(m.c,Object(f.a)({className:"Navbar-Brand",to:"/"},"className","nav-logo"),"Jobly"),r.a.createElement("ul",{className:"Navbar-Nav"},l?r.a.createElement("li",null,r.a.createElement(m.c,{to:"/companies"},"Companies")):null,l?r.a.createElement("li",null,r.a.createElement(m.c,{to:"/jobs"},"Jobs")):null,l?r.a.createElement("li",null,r.a.createElement(m.c,{to:"/profile"},"Profile")):null,r.a.createElement("li",null,l?r.a.createElement(m.c,{to:"/",onClick:function(){localStorage.removeItem("jobly-token"),a(null),u(!1),o.push("/")},className:"nav-logout"},"Logout"):r.a.createElement(m.c,{to:"/login",className:"nav-login"},"Login"))))});a(351);var H=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(u.a.mark((function e(){var t,a,n,r,s,l,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("jobly-token")){e.next=12;break}return t=localStorage.getItem("jobly-token"),e.next=4,j.getUser(t);case 4:a=e.sent,n=a.username,r=a.first_name,s=a.last_name,l=a.email,o=a.photo_url,i=a.jobs,c({username:n,first_name:r,last_name:s,email:l,photo_url:o,jobs:i});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(y.Provider,{value:{currentUser:a,setCurrentUser:c}},r.a.createElement(W,{currentUser:a,setCurrentUser:c}),r.a.createElement(V,{currentUser:a,setCurrentUser:c}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[195,1,2]]]);
//# sourceMappingURL=main.3b3be0e6.chunk.js.map